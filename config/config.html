<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin — Configuração do Evento</title>
  <link rel="stylesheet" href="/style.css" />
  <link rel="stylesheet" href="/config/config.css" />
</head>
<body>
  <main>
    <div class="card" id="card">
      <h1>Admin — Configurações (Redis)</h1>
      <p class="sub">Edite os valores do banco e salve.</p>

      <div class="top-actions">
        <button id="btnReload" class="smallBtn">Recarregar do servidor</button>
        <button id="btnExport" class="smallBtn">Exportar JSON</button>
        <label class="smallBtn">
          Importar JSON
          <input id="fileImport" type="file" accept=".json,application/json" style="display:none" />
        </label>
        <div class="toggle-container">
          <label for="toggleMonitor" class="toggle-label">localização:</label>
          <label class="toggle-switch">
            <input type="checkbox" id="toggleMonitor" checked>
            <span class="slider round"></span>
          </label>
        </div>
      </div>

      <form id="adminForm">
        <div class="grid">
          <div>
            <label class="required">RAIO PERMITIDO(METROS)
              <input id="allowedRadius" name="ALLOWED_RADIUS_METERS" type="number" required />
            </label>
          </div>

          <div>
            <label class="required">EVENTO
              <input id="evento" name="EVENTO" type="text" required />
            </label>
          </div>

          <div>
            <label class="required">TARGET_LAT
              <input id="targetLat" name="TARGET_LAT" type="number" step="any" required />
            </label>
          </div>

          <div>
            <label class="required">TARGET_LNG
              <input id="targetLng" name="TARGET_LNG" type="number" step="any" required />
            </label>
          </div>

          <div class="full">
            <label class="required">PALESTRAS</label>
            
            <div class="muted">Gerencie pares ID → Nome. IDs devem ser únicos (string ou number).</div>
            <button id="btnAtualizarTudo" type="button" class="atualizarBtn">ATUALIZAR TUDO</button>
            
            <div id="palestrasContainer" class="palestras-list"></div>

            <p style="margin-top:4rem;">Adicionar nova palestra</p>
            <div style="margin-top:0rem; display:flex; gap:.5rem;">
              <input id="newPalestraId" placeholder="ID da palestra (ex: 2304)" />
              <input id="newPalestraName" placeholder="Nome da palestra (ex: palestra ee)" />
              <button id="btnAddPalestra" type="button" class="smallBtn">Adicionar</button>
            </div>
          </div>

          <div class="full">
            <div style="display:flex; gap:.5rem; align-items:center; margin-top:2.5rem;">
              <button id="btnSave" class="buttonSubmit" type="button">Salvar no servidor</button>
              <button id="btnReset" type="button" class="smallBtn">Reset UI</button>
              <div id="statusMsg" class="situationMsg" ></div>
            </div>
          </div>

          <div class="full">
            <label>Preview do JSON</label>
            <pre id="jsonPreview" class="json-preview">Carregando...</pre>
          </div>
        </div>
      </form>

      <hr class="divider" />

      <div class="muted">Observações do backend:</div>
      <ul class="muted">
        <li>GET /api/config retorna o objeto JSON atual.</li>
        <li>PUT /api/config recebe o objeto JSON completo no corpo e persiste no Redis.</li>
      </ul>
    </div>
  </main>

  <script src="/config/config.js"></script>
</body>
</html>
